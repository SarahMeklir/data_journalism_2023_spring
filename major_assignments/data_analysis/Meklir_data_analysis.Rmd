```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
library(janitor)
library(tidycensus)
library(ggthemes)
```

```{r}
md_foreclosure_data <- read_csv("~/Documents/data_journalism_2023_spring/major_assignments/data_analysis/data/Maryland_Notices_of_Intent_to_Foreclose_by_Zip_Code.csv")
```

data cleaning ideas
- finding census data that matches cities to zipcodes and joining it so we can have a city column
- see which month has the most foreclosures overall
- do outside research about that time of year
- find month with highest percentage of total foreclosures in 2022 because we have all the data

```{r}
md_foreclosure_data %>% 
  
```

Question 1: a.) Where are there more foreclosures? **We just thought of this follow up question, so we're adding it here** b.) Is it different based on pop? Why? 
This is newsworthy because it would give insight into locations that experience higher numbers of debt, allowing a conclusion to be made about the area’s economic state.
- it would help to have cities for this one to generalize the count
// february 2022 is missing, feb 2020 is there instead. Maybe they mixed up the titles?
// For the first attempt at this and to see some data we're just totaling up 2022 because that's the only full year we have.
// 20772 is the highest in 2022, in Upper Marlboro in PG county. 
We're considering using the census api you used in prelab 10 to find population data for our counties. In the meantime, we're making a map with flawed data (aka data not smoothed out by population density)

**Here's a map! https://datawrapper.dwcdn.net/XGE1F/1/**
```{r}
md_foreclosure_data <- md_foreclosure_data %>% 
  group_by(Zip) %>% 
  mutate(zip_2022_total = `January 2022` + `February 2020` + `March 2022` + `April 2022` + `May 2022` + `June 2022` + `July 2022` + `August 2022` + `September 2022` + `October 2022` + `November 2022` + `December 2022`) %>% 
  arrange(desc(zip_2022_total))

write_csv(md_foreclosure_data, "data/md_foreclosure_data.csv")
```

Question 2: When were there the fewest or most foreclosures? Why?
This would likely indicate a change due to COVID, but I’m not sure whether that change would add more foreclosures or fewer due to the rent extensions the government allowed in the early days of the pandemic.
- not sure how to organize columns in a way that allows easy grouping

Question 3: What are the income levels for the most and least foreclosed-upon areas and what does the distribution of that look like?
This would show us how the value of homes and the income of people purchasing them differs in different income brackets.
- outside research

**Per capita income for 20772 (the highest number of foreclosures in 2022) is $53,168 according to https://www.incomebyzipcode.com/maryland/20772**
There are a WHOLE lot of zipcodes without any foreclosure notices OR with just one for 2022, so in the next few iterations of this project we'll try to combine zipcode data for each city so we have larger numbers to work with and more accurate population data.



Question 4: What does the racial demographic data look like in the areas of interest?
This is newsworthy because it would give us hard data on any disparities that might exist while comparing the income levels, foreclosure rate, and predominant races being foreclosed on.
- voter, census, or background research to find percentages

**according to this website (https://www.unitedstateszipcodes.org/20772/#:~:text=The%20people%20living%20in%20ZIP,than%20average%20number%20of%20families) the demographic data for 20772 is 79% Black and a high proportion of homeowners in their late 20s to early 40s.**

**we are not needing to do a ton of coding for this, let's find a time next week for the three of us to meet so we can discuss ways to deepen the level of coding we do and questions we ask.**

Question 5: How long were people living there before they were foreclosed on? 
I don’t know whether this data is provided but it would be interesting and would allow us to see the frequency of turnover. If we could compare the buying and selling frequency of highly foreclosed areas to that of infrequently foreclosed areas, it would add a new depth to our research. 
- census stuff!
  option 1: "B07001_017 Estimate!!Total:!!Same house 1 year ago: GEOGRAPHICAL MOBILITY IN THE PAST YEAR BY AGE FOR CURRENT RESIDENCE IN THE UNITED STATES"
  Option 2: "B07001_033 Estimate!!Total:!!Moved within same county: GEOGRAPHICAL MOBILITY IN THE PAST YEAR BY AGE FO"
  Option 3: "B07001_049 Estimate!!Total:!!Moved from different county within same state: GEOGRAPHICAL MOBILITY IN THE PAST YEAR BY AGE FOR CURRENT RESIDENCE IN THE UNITED STATES"
  Option 4: "B07001_065 Estimate!!Total:!!Moved from different state: GEOGRAPHICAL MOBILITY IN THE PAST YEAR BY AGE FOR CURRENT RESIDENCE IN THE UNITED STATES" 
  Option 5: "B07001_081 Estimate!!Total:!!Moved from abroad: GEOGRAPHICAL MOBILITY IN THE PAST YEAR BY AGE FOR"
  Option 6: "B07003_001 Estimate!!Total: GEOGRAPHICAL MOBILITY IN THE PAST YEAR BY SEX FOR CURRENT RESIDENCE IN THE UNITED STATES"

We think the idea is to load that data and do some adding to find the number of people who've moved away from their houses in that time, but we're not sure how to approach that or whether that's a good idea. We'd love to talk to you in or after class on Tuesday to discuss ideas.

```{r}
census_api_key("577bf4d5bf135998c07189afd7dc2e2d621240d6", install = TRUE)
ACS5 <- load_variables(2021, "acs5", cache = TRUE) 
```
